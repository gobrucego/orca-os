{
  "$schema": "design-violations-schema-v1",
  "version": "1.0.0",
  "description": "Forbidden patterns and design violations for OS 2.0 taste guardrails",
  "categories": {
    "layout": {
      "forbidden_patterns": [
        {
          "pattern": "max-width:\\s*800px",
          "violation": "max-width: 800px (too narrow)",
          "correct": "max-width: 1200px (design system standard)",
          "severity": "high",
          "reason": "Design system mandates 1200px max container width for readability"
        },
        {
          "pattern": "width:\\s*100vw",
          "violation": "width: 100vw (causes horizontal scroll)",
          "correct": "width: 100% or max-width with proper container",
          "severity": "medium",
          "reason": "100vw doesn't account for scrollbar, causes overflow"
        }
      ]
    },
    "typography": {
      "forbidden_patterns": [
        {
          "pattern": "font-size:\\s*1[0-3]px",
          "violation": "Font size too small (10-13px)",
          "correct": "Minimum 14px body text, 16px preferred (okay for footnotes/captions)",
          "severity": "low",
          "reason": "Small fonts can be acceptable for footnotes, captions, or supplementary text"
        },
        {
          "pattern": "line-height:\\s*1(\\.0)?[^0-9]",
          "violation": "line-height: 1.0 (too tight)",
          "correct": "line-height: 1.5 minimum for body text",
          "severity": "medium",
          "reason": "Tight line-height reduces readability"
        }
      ]
    },
    "spacing": {
      "forbidden_patterns": [
        {
          "pattern": "(margin|padding):\\s*[0-9]+px(?![\\s]*[0-9]*[048]px)",
          "violation": "Non-standard spacing (not on 4/8px grid)",
          "correct": "Use 4px/8px/16px/24px/32px scale",
          "severity": "high",
          "reason": "Design system requires mathematical spacing progression"
        },
        {
          "pattern": "gap:\\s*[13579][0-9]*px",
          "violation": "Odd-numbered gap values",
          "correct": "Use even multiples: 4px, 8px, 16px, 24px, 32px",
          "severity": "medium",
          "reason": "Spacing must follow 8px grid system"
        }
      ]
    },
    "colors": {
      "forbidden_patterns": [
        {
          "pattern": "color:\\s*#[0-9a-fA-F]{6}(?!.*var\\()",
          "violation": "Hardcoded hex colors instead of design tokens",
          "correct": "Use CSS variables: var(--color-primary)",
          "severity": "critical",
          "reason": "Design tokens ensure consistent theming and updates"
        },
        {
          "pattern": "background:\\s*(black|white|#000|#fff|#ffffff|#000000)(?!.*var\\()",
          "violation": "Pure black/white backgrounds",
          "correct": "Use semantic color tokens for proper contrast",
          "severity": "medium",
          "reason": "Pure black/white can cause eye strain and poor contrast"
        }
      ]
    },
    "responsiveness": {
      "forbidden_patterns": [
        {
          "pattern": "@media\\s*\\([^)]*width:\\s*[0-9]+px\\)",
          "violation": "Arbitrary breakpoint values",
          "correct": "Use design system breakpoints: 640px, 768px, 1024px, 1280px, 1536px",
          "severity": "high",
          "reason": "Standard breakpoints ensure consistency across project"
        },
        {
          "pattern": "position:\\s*fixed.*width:\\s*100%",
          "violation": "Fixed position with 100% width (mobile issues)",
          "correct": "Use proper container constraints or avoid fixed positioning",
          "severity": "medium",
          "reason": "Can cause layout issues on mobile devices"
        }
      ]
    },
    "antipatterns": {
      "forbidden_patterns": [
        {
          "pattern": "!important",
          "violation": "!important flag",
          "correct": "Fix specificity issues properly",
          "severity": "high",
          "reason": "!important indicates poor CSS architecture"
        },
        {
          "pattern": "overflow:\\s*hidden.*height:\\s*auto",
          "violation": "overflow: hidden with auto height (content clipping)",
          "correct": "Use proper container sizing or overflow-y: auto",
          "severity": "medium",
          "reason": "Can unexpectedly clip content"
        },
        {
          "pattern": "display:\\s*inline-block.*vertical-align:\\s*top",
          "violation": "inline-block layout (outdated)",
          "correct": "Use flexbox or grid for modern layouts",
          "severity": "low",
          "reason": "Flexbox/grid are more maintainable and robust"
        }
      ]
    }
  },
  "enforcement": {
    "blocking_severity": ["critical", "high"],
    "warning_severity": ["medium"],
    "info_severity": ["low"]
  },
  "exemptions": {
    "description": "Patterns that can override violations when justified",
    "allowed_overrides": [
      {
        "pattern": "max-width: 800px",
        "context": "sidebar or narrow content column",
        "requires_justification": true
      },
      {
        "pattern": "!important",
        "context": "utility classes or third-party style overrides",
        "requires_justification": true
      }
    ]
  }
}
